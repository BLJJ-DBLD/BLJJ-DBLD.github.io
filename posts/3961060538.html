<!DOCTYPE html><html lang="zh-CN"><head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="BLJJ-DBLD">


    <meta name="subtitle" content="微任务">




<title>P2 编写的第一个 TypeScript 程序 | BLJJ-DBLD Blog</title>



    <link rel="icon" href="https://cdn.reorz.com/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    
    
    
    



    <!-- scripts list from _config.yml -->
    
    
    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/js/lightgallery.min.js"></script>
    
    
    



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SSN1WL65KY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SSN1WL65KY');
</script>

<meta name="generator" content="Hexo 5.4.0"><script>function loadCss(l){var d=document,h=d.head,s=d.createElement('link');s.rel='stylesheet';s.href=l;!function e(f){if (d.body)return f();setTimeout(function(){e(f)})}(function(){h.appendChild(s);});}loadCss('/style.css');loadCss('https://cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/css/lightgallery.min.css');</script><noscript><link rel="stylesheet" href="/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/css/lightgallery.min.css"></noscript></head>

<body>
    

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">&lt; BLJJ-DBLD blog /&gt;</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">归档</a>
                
                    <a class="menu-item" href="/categories">分类</a>
                
                    <a class="menu-item" href="/tags">标签</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">&lt; BLJJ-DBLD blog /&gt;</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">☰ Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">归档</a>
                
                    <a class="menu-item" href="/categories">分类</a>
                
                    <a class="menu-item" href="/tags">标签</a>
                
            </div>
        </div>
    </nav>

</header>

            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>


    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">P2 编写的第一个 TypeScript 程序</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">BLJJ-DBLD</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">一月 5, 2022&nbsp;&nbsp;21:48:08</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/TypeScript/">TypeScript</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="编写的第一个-TypeScript-程序"><a href="#编写的第一个-TypeScript-程序" class="headerlink" title="编写的第一个 TypeScript 程序"></a>编写的第一个 TypeScript 程序</h1><h2 id="安装-TypeScript"><a href="#安装-TypeScript" class="headerlink" title="安装 TypeScript"></a>安装 TypeScript</h2><p>TypeScript 的命令行工具安装方法：</p>
<figure class="highlight coffeescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> install typescript --<span class="built_in">global</span></span><br></pre></td></tr></tbody></table></figure>

<p>以上命令会在全局环境下安装 <code>tsc</code> 命令，安装完成后，我们就可以在任意地方去执行 <code>tsc</code> 命令了。</p>
<h2 id="编写-TypeScript-文件"><a href="#编写-TypeScript-文件" class="headerlink" title="编写 TypeScript 文件"></a>编写 TypeScript 文件</h2><p>在 <code>index.ts</code> 内复制以下内容：</p>
<figure class="highlight typescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hello: <span class="built_in">string</span> = <span class="string">'Hello TypeScript'</span></span><br></pre></td></tr></tbody></table></figure>

<p>然后在当前文件夹内终端中输入：</p>
<figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc <span class="built_in">index</span>.<span class="keyword">ts</span></span><br></pre></td></tr></tbody></table></figure>

<p>这时候会生成一个编译好的文件 <code>index.js</code> 在当前文件夹内：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hello = <span class="string">'Hello TypeScript'</span></span><br></pre></td></tr></tbody></table></figure>

<p>当然也可以前往 <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/play">TypeScript 官网</a> 去查看生成的 js 文件</p>
<h2 id="配置本地构建工具（Webpack）来实现自动化"><a href="#配置本地构建工具（Webpack）来实现自动化" class="headerlink" title="配置本地构建工具（Webpack）来实现自动化"></a>配置本地构建工具（Webpack）来实现自动化</h2><p>在当前文件夹终端内初始化输入：</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init <span class="regexp">//</span> 创建 package.json</span><br><span class="line">tsc --init <span class="regexp">//</span> 创建 typescript.json</span><br></pre></td></tr></tbody></table></figure>

<p>加入构建工具分别有：</p>
<ul>
<li>webpack</li>
<li>webpack-cli</li>
<li>webpack-dev-server</li>
</ul>
<figure class="highlight q"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli webpack-<span class="built_in">dev</span>-server --<span class="built_in">save</span>-<span class="built_in">dev</span></span><br></pre></td></tr></tbody></table></figure>

<p>在文件夹内创建 <code>build</code> 文件夹以作 webpack配置文件夹</p>
<figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">build</span><br><span class="line">|- webpack.base.config.js <span class="comment">// 公共配置</span></span><br><span class="line">|- webpack.config.js <span class="comment">// 配置入口文件</span></span><br><span class="line">|- webpack.dev.config.js <span class="comment">// 开发环境配置</span></span><br><span class="line">|- webpack.pro.config.js <span class="comment">// 生产环境配置</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="公共配置（webpack-base-config-js）"><a href="#公共配置（webpack-base-config-js）" class="headerlink" title="公共配置（webpack.base.config.js）"></a>公共配置（webpack.base.config.js）</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">'./src/index.ts'</span>,</span><br><span class="line">  <span class="attr">output</span>: {</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">'app.js'</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">resolve</span>: {</span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">'.js'</span>, <span class="string">'.ts'</span>, <span class="string">'.tsx'</span>]</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">module</span>: {</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      {</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.ts(x)?$/i</span>,</span><br><span class="line">        use: [{</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">'ts-loader'</span></span><br><span class="line">        }],</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></span><br><span class="line">      }</span><br><span class="line">    ]</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin({</span><br><span class="line">      <span class="comment">// 模板 html</span></span><br><span class="line">      <span class="attr">template</span>: <span class="string">'./src/tpl/index.html'</span></span><br><span class="line">    })</span><br><span class="line">  ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>安装必要插件与扩展</p>
<ol>
<li>ts-loader</li>
</ol>
<figure class="highlight elm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">npm</span> install tsc-loader typescript <span class="comment">--save-dev</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>需要注意是：在安装 <code>tsc-loader</code> 时，需要同时再安装一次 <code>typescript</code> 。</p>
</blockquote>
<ol start="2">
<li>html-webpack-plugin</li>
</ol>
<figure class="highlight q"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install html-webpack-plugin --<span class="built_in">save</span>-<span class="built_in">dev</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>HtmlWebpackPlugin 的作用：当使用 <code>webpack</code> 打包时，创建一个 <code>html</code> 文件，并把 <code>webpack</code> 打包后的静态文件自动插入到这个 <code>html</code> 文件当中。更加详细的内容点击 <a target="_blank" rel="noopener" href="https://www.webpackjs.com/plugins/html-webpack-plugin/">这里</a></p>
</blockquote>
<h3 id="开发环境（webpack-dev-config-js）"><a href="#开发环境（webpack-dev-config-js）" class="headerlink" title="开发环境（webpack.dev.config.js）"></a>开发环境（webpack.dev.config.js）</h3><figure class="highlight coffeescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.<span class="built_in">exports</span> = {</span><br><span class="line">  devtool: <span class="string">'cheap-module-eval-source-map'</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>上面这行代码看似很长，其实是可以拆分理解的。</p>
<p>看似配置项很多， 其实只是五个关键字 <code>eval</code>，<code>source-map</code>，<code>cheap</code>，<code>module</code>，<code>inline</code> 的任意组合。这五个关键字每一项都代表一个特性， 这五种特性可以任意组合。它们分别代表以下五种特性（单独看特性说明有点不明所以）：</p>
<ul>
<li>eval：使用 <code>eval</code> 包裹模块代码。</li>
<li>source-map：产生 <code>.map</code> 文件。</li>
<li>cheap：不包含列信息，也不包含 <code>loader</code> 和 <code>sourcemap</code></li>
<li>module：包含 <code>loader</code> 的 <code>sourcemap</code> （比如 <code>tsc to js</code>， <code>babel</code> 的 <code>sourcemap</code>）</li>
<li>inline：将 <code>.map</code> 文件作为 <code>DataURI</code> 嵌入，不单独生成 <code>.map</code> 文件（这个配置项比较少见）</li>
</ul>
<blockquote>
<p>相关详细内容，可以查阅 <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000008315937">这里</a>。</p>
</blockquote>
<h3 id="生产环境（webpack-pro-config-js）"><a href="#生产环境（webpack-pro-config-js）" class="headerlink" title="生产环境（webpack.pro.config.js）"></a>生产环境（webpack.pro.config.js）</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> {CleanWebpackPlugin} = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.<span class="built_in">exports</span> = {</span><br><span class="line">  plugin: [</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin()</span><br><span class="line">  ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><code>CleanWebpackPlugin</code> 插件的作用是：成功构建后清空目录。因为为了避免缓存，我们一般会在文件后加入 <code>hash</code> 。这样多次后，就会产生很多无用的文件。因此通过这个插件就可以帮助我们清空目录，避免无效文件存在。</p>
</blockquote>
<h3 id="入口文件（webpack-config-js）"><a href="#入口文件（webpack-config-js）" class="headerlink" title="入口文件（webpack.config.js）"></a>入口文件（webpack.config.js）</h3><figure class="highlight livescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> {merge} = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>)</span><br><span class="line"><span class="keyword">const</span> baseConfig = <span class="built_in">require</span>(<span class="string">'./webpack.base.config'</span>)</span><br><span class="line"><span class="keyword">const</span> devConfig = <span class="built_in">require</span>(<span class="string">'./webpack.dev.config'</span>)</span><br><span class="line"><span class="keyword">const</span> proConfig = <span class="built_in">require</span>(<span class="string">'./webpack.pro.config'</span>)</span><br><span class="line"><span class="keyword">let</span> config = process.env.NODE_ENV === <span class="string">'development'</span> ? devConfig : proConfig</span><br><span class="line"><span class="built_in">module</span>.<span class="built_in">exports</span> = merge(baseConfig, config)</span><br></pre></td></tr></tbody></table></figure>

<p>根据环境的不同，配置不同的 <code>webpack</code> 文件</p>
<h3 id="配置-package-json"><a href="#配置-package-json" class="headerlink" title="配置 package.json"></a>配置 package.json</h3><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="string">"scripts"</span>: {</span><br><span class="line">  <span class="attr">"start"</span>: <span class="string">"webpack-dev-server --mode=development --config ./build/webpack.config.js"</span>,</span><br><span class="line">  <span class="attr">"build"</span>: <span class="string">"webpack --mode=production --config ./build/webpack.config.js"</span></span><br><span class="line">}</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><code>webpack-dev-server</code> 的部分功能克服了 <code>webpack</code> 编译的两个问题：<ul>
<li>原始文件做出改动后，<code>webpack-dev-server</code> 就会实时编译，做到热更新。但是最后的编译文件并没有输出到指定的目标文件夹中，而是都<strong>保存在内存中</strong>。因此在使用 <code>webpack-dev-server</code> 开发的时候并不能看到编译后的文件</li>
</ul>
</li>
<li><code>--mode=development</code>：配置当前的运行环境</li>
<li><code>--config ./build/webpack.config.js</code>：指定 <code>webpack</code> 的配置文件地址</li>
</ul>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>BLJJ-DBLD</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://bljj-dbld.github.io/posts/3961060538.html">https://bljj-dbld.github.io/posts/3961060538.html</a></span>
                    </p>
                
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/posts/3958135228.html">P3 枚举类型（enum）</a>
            
            
            <a class="next" rel="next" href="/posts/396870629.html">P0 TypeScript 较 JavaScript</a>
            
        </section>
        <!-- <section class="post-comment">
            <div id="disqus_thread"></div>
        </section> -->

    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>
            © 2015-2022 BLJJ-DBLD | Elegant theme by Chic | <a href="https://stats.uptimerobot.com/J8kXJc8qlg" target="_blank">Status</a>
        </span>
    </div>
</footer>

    </div>


<script src="/bundle.js"></script><script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Light"
            }
        })();
    ;

    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
;

    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script></body></html>