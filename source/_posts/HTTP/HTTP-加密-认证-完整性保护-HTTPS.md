---
title: HTTP + 加密 + 认证 + 完整性保护 = HTTPS
tags:
  - HTTPS
  - SSL握手
categories:
  - HTTP
abbrlink: 3829252120
date: 2022-01-11 21:42:14
---

# 1. HTTP 加上加密处理和认证以及完整性保护后即是 HTTPS

HTTP 缺点：
1. 通信采用明文传输，容易被窃听
2. 无论是客户端 、服务端，都无法知晓确认通信方
3. 考虑到接收到的报文在通信途中已经遭到篡改的可能性

所以基于 HTTP 的局限性，出现了 HTTPS
- 简单来说，HTTPS = HTTP + 加密 + 认证 + 完整性保护

# 2. HTTPS 是身披 SSL 外壳的 HTTP

HTTPS 并非是应用层的一种新协议。只是 HTTP 通信接口部分用 SSL（Secure Socket Layer）和 TSL（Transport Layer Security）协议代替而已。

![HTTPS 和 HTTP 的区别](image_1.png)

# 3. 相互交换密钥的公开加密技术 & 共享密钥加密技术

## 3.1 相互交换密钥的公开加密技术

SSL 采用一种叫做公开密钥加密（Public-Key cryptography）的加密处理方式。加密方法中加密算法是公开的，而密钥却是保密的。通过这种方式得以保证加密方法的安全性。

## 3.2 共享密钥加密技术

加密和解密使用同一把密钥的方式称为共享密钥加密（Common key crypto system），也被叫做对称密钥加密。

## 3.3 HTTPS 采用混合加密机制

HTTPS 采用共享密钥加密和公开密钥加密两者并用的混合加密机制。

不单纯采用公开密钥加密方式的原因是，公开密钥加密与共享密钥加密相比，其处理速度要慢很多。

所以，利用两者各自的优势，在交换密钥环节使用公开密钥加密方式，之后的建立通信交换报文阶段则使用共享密钥加密方式

![混合密钥加密机制](image_2.png)

> 混合加密主要是为了解决 `HTTP` 中内容可能被窃听的问题。但是它并不能保证数据的完整性，也就是说在传输的时候数据是有可能被第三方篡改的，比如完全替换掉，所以说它并不能校验数据的完整性。如果需要做到这一点就需要使用到**数字签名**。

# 4. 证明公开密钥正确性的证书

公开密钥加密方式还是存在一些问题，那就是无法证明公开密钥本身就是货真价实的公开密钥。在进行公开密钥传输时，有可能真正的公开密钥已经被攻击者替换掉了。

所以为了解决这个问题，就需要第三方数字证书机构和其相关机构颁发的公开密钥证书。

公开密钥证书的获取步骤：
1. 向证书机构提出公开密钥的证书申请。在判明提出者的身份之后进行下一步操作
2. 将服务器的公开密钥登录至数字认证机构
3. 数字认证机构使用**自己的私有密钥**对**服务器的公开密钥**做数字签名证书并将证书与公开密钥绑定。
4. 服务器会将这份由数字证书认证机构颁布的公钥证书发送给客户端，以进行公开密钥加密方式通信。
5. 接到证书的客户端会使用数字认证机构的公开密钥，对那张证书上的数字签名进行验证，一旦验证通过，就能确认两件事：
    1. 数字签名是由真实有效的数字认证机构颁布的
    2. 服务器的公开密钥是值得信赖的

> 为了能够安全的拿到数字证书机构的公开密钥。多数浏览器开发商发布版本时，会事先在**内部植入常用认证机构的公开密钥**。

图解：

![确保服务器的公开密钥是正确的](image_3.png)

---

参考：

- [《图解 HTTP》](https://www.amazon.cn/dp/B0153170B2)