---
title: 自定义拖拽表单
tags:
  - 盛趣游戏
categories:
  - 工作经历
hidden: false
abbrlink: 3359950987
date: 2022-11-14 20:31:38
---

> 因为我在公司主要负责的是内容编辑器，因此会涉及到诸多各式各样的表单配置，为了简化开发，节约时间成本，因此想到采用自定义拖拽表单来生成统一的表单结构。

抽象的表单则必定有表单字段描述：`JSON schema`

# 先了解 JSON Schema

1. 使用 JSON 的好处：
  - 能描述清楚现有表单字段的数据格式
  - 提供清晰的人工和机器可读文档
  - 完整的数据结构，有利于自动化测试
  - 完整的数据结构，有利于验证客户端提交数据的质量

2. 什么是 JSON schema：JSON schema 本身就是一种数据结构，可以清晰的描述 JSON 数据的结构。**是一种描述 JSON 数据的 JSON 数据**

3. 使用 JSON schema 的好处：
  - JSON Schema 非常适用于基于 JSON 的 HTTP 的 API。
  - JSON Schema 从 Java 的基本数据类型中对 JSON 结构进行校验，所以对 JSON 结构的校验可以理解为对每种不同数据类型的相应校验。
  - 接口测试中可以快速的定位到自己数据格式的正确性。

使用 JSON Schema 有它自己的一套规范，[JSON Schema 规范（中文版）](https://json-schema.apifox.cn/)

# 表单与 Schema 相结合

> 如果说 Schema 是骨架，那表单就是肉体了。

目前我们团队看到 自定义表单 成熟且好看的是 [xrender](https://xrender.fun/form-render)

其中囊括了 自定义表单、自定义表格、表单设计器 等高自定义化模块。

# 解析的选择

1. 前端配置-后端解析

> 默认的自定义组件参数已满足大部分需求，但有些额外的配置则需要自己与后端来进行规范

这么做的优点是后端返回来的 schema 数据就是完整的，但是会因为访问的数据来源不确定、数据数量不确定而导致响应漫长。

因此，这边后端做的优化是将请求的数据用 redis 做缓存。这样做确实极大的压缩了请求时间与次数。

2. 前端配置-前端解析

> 由后端来解析确实会介绍请求，但变相的却也增加了响应时间，从而影响用户体验。而表单初始化的渲染只需要字段和数值。

由前端自己来解析也能将从表单整体的等待转为表单项的等待。从而使用户体验得到极大的提升。