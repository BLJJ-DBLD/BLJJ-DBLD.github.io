---
title: 前端需要注意哪些 SEO
tags: []
categories:
  - 面试题
abbrlink: 1773257593
date: 2022-01-09 20:13:50
hidden: true
---

## A:

- 合理的 `title`、 `description`、 `keywords`：搜索对这三项的权重逐个减小。
  - `title` 强调重点即可
  - `description` 把页面内容高度概括，长度合适，不可过分堆砌关键词，不同页面 `description` 有所不同
  - `keyword` 列举出重要关键词即可

- 语义化的 `HTML` 代码，符合 W3C 规范：语义化代码让搜索引擎容易理解网页
- 重要的内容放在 `HTML` 代码的最前面：搜索引擎抓取 `HTML` 顺序是从上到下，有的搜索引擎对抓取长度有限制，保证重要内容一定会被抓取
- 重要的内容不要用 `js` 输出：爬虫不会执行 `js` 获取内容
- 少用 `iframe`：搜索引擎不会抓取 `iframe` 中的内容
- 非装饰性图片必须加 `alt`
- 提高网站速度： 网站速度是搜索引擎排序的一个重要指标

---

# 延伸问题

## Q: `<img/>` 的 `alt` 与 `title` 的区别

A:
- `title`: 通常鼠标滑动到元素上的时候显示
- `alt`: 是 `<img/>` 特有的属性，是图片内容的等价描述。用于图片无法加载时显示、度屏器阅读图片。可提高图片可访问性，除了纯装饰图片外都必须设置有意义的值，搜索引擎会重点分析。

## Q: 提高网站访问速度的手段有哪些

A:
- `content` 方面：
  - 减少 `HTTP` 请求：
    1. 将文件进行合并
    2. 使用 `CSS` 精灵图（雪碧图）
    3. `inline Image` - 小的图片采用 base64 位直接访问，可以减少请求次数
- `Server` 方面
  - 对于不常更改的内容可以使用 `CDN`
  - 配置资源缓存
    - 例如配置 `expirese`, `Etag`
    - 对组件使用 `Gzip` 压缩
- `Cookie` 方面
  - 减小 `cookie` 大小
- `css` 方面
  - 将样式表放在页面顶部
  - 不使用 `CSS` 表达式
  - 使用 `<link/>` 不使用 `@import`
- `Javascript` 方面
  - 将脚本放在页面底部
  - 将 `javascript` 和 `css` 从外部引入，并压缩。
  - 删除不需要的脚本
  - 减少并缓存对 `DOM` 访问
- 图片方面
  - 优化图片：根据实际颜色需要选择色深、压缩
  - 优化 `CSS` 精灵
  - 不在 `HTML` 中拉伸图片

## Q: 有哪些前端性能优化方法

A:
- 减少 http 请求：`CSS` 精灵图、`JS`、`CSS` 源码压缩、图片大小控制合适；网页 Gzip，data缓存，图片服务器
- 前端模板 JS + 数据，减少由于 HTML 标签导致的带宽浪费，前端用变量保存 AJAX 请求结果，每次操作本地变量，不用请求，减少请求次数
- 用 innerHTML 代替 DOM 操作，减少 DOM 操作次数，优化 javascript 性能
- 当需要操作很多样式时设置 className 而不是直接操作 style
- 少用全局变量、缓存 DOM 节点查找的结果。减少 IO 读取操作
- 避免使用 CSS 表达式
- 图片预加载，将样式表放在顶部，将脚本放在底部加上时间戳
- 避免在页面的主体布局中使用table，table要等其中的内容完全下载之后才会显示出来，显示比div+css布局慢

## Q: 如何在 `webpack` 中对限制大小内的图片转 base64 位

A: 在 webpack 中使用 url-loader 配置

``` javascript
module: {
  rules: [{
    test: /\.(jpg|png|gif)$/i,
    use: [{
      loader: 'url-loader',
      options: {
        limit: 10 * 1024 // 小于 10kb 的图片就用 base64 处理
        name: '[hash10].[ext]' // 取 hash 值的前 10 位，[ext]: 取原来的扩展名
      }
    }]
  }]
}
```

使用 base64
- 优点：
  - base64 格式的图片是文本格式，降低了资源服务器的损耗
  - 网页中使用 base64 格式的图片时，不需要在请求服务器调用图片资源，减少了对服务器的请求次数
  - base64 编码的字符串更适合不同平台、不同语言的传输
- 缺点：
  - base64 格式的文本内容较多，存储在数据库中增大了数据库的压力
  - 网页加载虽然不用再请求服务器了，但是 base64 格式的内容太多，所以加载网页的速度会降低，可能会影响用户的体验
  - base64 无法缓存，要缓存只能缓存包含 base64 的文件，比如 js 或者 css, 这比直接缓存图片要查很多，而且一般 html 改动比较频繁，所以等同得不到缓存效益

## Q: HTTP 缓存配置及使用场景

A:

[一文详解](https://www.infoq.cn/article/aiwqlgtlk2eft5yi7doy)

简化背题：

HTTP 缓存分为 2 种，一种是 **强缓存**，另一种是 **协商缓存**。
缓存主要的作用是：加快资源获取再速度，提升用户体验，减少网络传输，缓解服务端的压力。

![整体流程图](image_1.png)

### 强缓存

不需要发送请求到服务端，直接读取浏览器本地缓存，HTTP 状态码是 200 。
强缓存又分为 `Disk Cache`（存放在硬盘中）和 `Memory Cache`（存放在内存中），存放的位置是由浏览器控制的。
是否强缓存由 `Expires`、`Cache-Control` 和 `Pragma` 3个 Header 属性共同来控制。

- `Expires`
  - 值是一个 HTTP 日期。发起请求时，会根据系统时间和 Expires 的值进行比较，如果系统时间超过了 Expires 的值，缓存失效。
  - 因此当系统时间和服务器时间不一致的时候，会有缓存有效期不准的问题。
  - 优先级在3个 Header 属性中是最低的。

- `Cache-Control`
  - `Cache-Control` 是 HTTP/1.1 中新增的属性，在请求头和响应头中都可以使用
  - 值的类型有：
    - `max-age`：单位是秒，缓存时间计算的方式是距离发起的时间的秒数，超过间隔的秒数缓存失效
    - `no-cache`：不使用强缓存，需要与服务器验证缓存是否新鲜
    - `no-store`：禁止使用缓存（包括协商缓存），每次都向服务器请求最新的资源
    - `private`：专用于个人的缓存，中间代理、CDN 等不能缓存此响应
    - `public`：响应可以被中间代理、CDN 等缓存
    - `must-revalidate`：在缓存过期前可以使用，过期后必须向服务器验证

- `Pragma`
  - `Pragma` 只有一个属性值，就是 no-cache ，效果和 `Cache-Control` 中的 no-cache 一致，不使用强缓存，需要与服务器验证缓存是否新鲜，在 3 个头部属性中的优先级最高。

### 协商缓存

当浏览器的强缓存失效的时候或者请求头中设置了不走强缓存，并且在 **请求头** 中设置了 `If-Modified-Since` 或者 `If-None-Match` 的时候，会将这两个属性值到服务端去验证是否命中协商缓存，如果命中了协商缓存，会返回 304 状态，加载浏览器缓存，并且 **响应头** 会设置 `Last-Modified` 或者 `ETag` 属性。

- `ETag/If-None-Match`
  - 值是一串 hash 码，代表的是一个资源的标识符
    - hash 码的生成是可以自定义的方式
  - 通过请求头中的 If-None-Match 和当前文件的 hash 值进行比较，如果相等则表示命中协商缓存。
  - hash 码是以 "W/" 开头的一串字符串，说明此时 **协商缓存的校验是弱校验的**，只有服务器上的文件差异（根据 ETag 计算方式来决定）达到能够触发 hash 值后缀变化的时候，才会真正地请求资源，否则返回 304 并加载浏览器缓存。

- `Last-Modified/If-Modified-Since`
  - 代表的是文件的最后修改时间
  - 第一次请求服务端会把资源的最后修改时间放到 `Last-Modified` 响应头中，第二次发起请求的时候，请求头会带上上一次响应头中的 `Last-Modified` 的时间，并放到 `If-Modified-Since` 请求头属性中，服务端根据文件最后一次修改时间和 `If-Modified-Since` 的值进行比较，如果相等，返回 304 ，并加载浏览器缓存。

## Q: `<link/>` 与 `@import` 的区别

A:
- 从属关系区别
  - `@import` 是 CSS 提供的语法规则，只有导入样式表的作用
  - `<link/>` 是 HTML 提供的标签，不仅可以加载 CSS 文件，还可以定义 RSS、rel 连接属性等。
- 加载顺序区别
  - 加载页面时，`<link/>` 标签引入的 CSS 被同时加载
  - `@import` 引入的 CSS 将在页面加载完毕后被加载。
- 兼容性区别
  - `@import` 是 CSS2.1 才有的语法，故只可在 IE5+ 才能识别
  - `<link/>` 标签作为 HTML 元素，不存在兼容性问题。
- DOM 可控性区别
  - 由于 DOM 方法是基于文档的，无法使用 `@import` 的方式插入样式。
  - 可以通过 JS 操作 DOM ，插入 `<link/>` 标签来改变样式

## Q: 图片格式有哪些

|      | gif | jpg/jpeg | png | apng | webp | svg |
| :--: | :--: | :--: | :--:| :--:| :--: | :--: |
| 优点: | 1. 体积小；<br/>2. 支持动画；<br/>3. 支持透明（不持支半透明，因为不支持 Alpha 透明通道） | 1. 采用有损压缩，压缩后体积更小；<br/>2. 支持24位真彩色；<br/>3. 支持渐进式加载；| 1. 无损压缩；<br/>2. 支持透明、半透明；<br/>3. 最高支持24位真彩色图像以及8位灰度图像，从而彻底地消除锯齿边缘。 | 1. 支持 png 的所有优点；<br/>2. 支持动画（多张png组成的动图，在 MAC 中打开可以看到组成 apng 的每一张图） | 1. 集成了以上所有图片的优点；<br/>2. 拥有更高的压缩率 | 1. 易读取与修改；<br/>2. 尺寸更小，且可压缩性更强；<br/>3. 是矢量图，无论怎么放大，都不会失真；<br/>4. 可在任何的分辨率下被高质量地打印；<br/>5. 可以与 JavaScript 技术一起运行；<br/>6. 是纯粹的 XML | 
| 缺点: | 采用了8位（即2的8次方。）压缩，最多只能处理256种颜色 | 1.有损压缩会损坏图片的质量；<br/>2.不支持透明/半透明；<br/> | 1. 与jpg的有损耗压缩相比，png提供的压缩量较少；<br/> 2. 不支持动画，如需支持动画还得使用 apng | 1. 浏览器支持情况较差 | 1. 浏览器支持情况很差 | 1. 渲染成本相对于其他格式图片比较高，对于性能有影响；<br/>2. 需要学习成本，因为SVG是一种用XML定义的语言。|

![如何选择图片格式](image_2.png)