---
title: P5 函数
tags:
  - null
categories:
  - TypeScript
hidden: false
abbrlink: 1453596776
date: 2022-01-22 20:17:47
---

# 函数的四种定义方式

1. 直接的函数定义

``` typescript
function add (x: number, y: number) {
    return x + y
}
```

> 需要明确的指出参数的类型，而返回值能通过 ts 的类型推断出。

2. 通过一个变量定义一个函数类型

``` typescript
let add: (x: number, y: number) => number
```

3. 通过类型别名来顶一个函数类型

``` typescript
type add = (x: number, y: number) => number
```

4. 通过接口定义函数类型

``` typescript
interface add {
    (x: number, y: number): number
}
```

> ❗ 需要注意的是，**2，3，4只是对函数类型的定义，并没有对函数具体的实现**。真正调用的时候需要去书写正常的一个函数。

## 函数中的参数要求

> ❗ js 对参数是没有限制的，但是在 ts 中，形参和实参是需要一一对应的。

当在函数类型的定义中，不能确定参数是否必须时，可以这样做：

``` typescript
function add (x: number, y?: number) {
    if (y) {
        return x + y
    } else {
        return x
    }
}
```

> ❗ 需要注意的是：可选参数必须在必选参数之后声明，且可选参数后不能有必选参数。

2. 当在函数类型的定义中，允许任意位置设置参数默认值。

> ❗ 需要注意的是，在必选参数前，默认参数是不可以省略的，必须显式的传入 `undefinde` 。必选参数后的是允许不默认传 `undefinde` 。

``` typescript
function add (x: number, y = 0, z: number, q = 1) {
    return x + y + z + q
}
```

使用该 `add` 函数时：

``` javascript
// 参数 y 的值必须显式的传入 undefined
add(1, undefined, 3) // 5
```

3. 当参数不确定的时候，可以使用剩余参数（类似于 ES6 的扩展运算符在函数中的使用）

``` typescript
function add (x: number, ...res: number[]) {
    return x + res.reduce((pre, cur) => pre + cur)
}
```

# 函数的重载

> 重载的定义是：是同一函数名，但是参数类型或参数个数不同的函数。更多的了解，点 [这里](https://baike.baidu.com/item/%E9%87%8D%E8%BD%BD%E5%87%BD%E6%95%B0?fr=aladdin&from_id=9567687&fromtitle=%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD&type=syn)
> 好处是：不用为了相似功能的函数起不同名称

``` typescript
function fn4 (...res: number[]): number
function fn4 (...res: string[]): string
function fn4 (...res: any[]): any {
  if (typeof res[0] === 'string') {
    return res.join(' ')
  } else if (typeof res[0] === 'number') {
    return res.reduce((pre, cur) => pre + cur)
  }
}
fn4(1, 2, 3)
fn4('a', 'b', 'c')
```

> 编译器在处理重载的时候，首先会去遍历重载列表，并从头开始匹配这个列表，如果匹配的话就不会再继续匹配下一个了，所以**一般都把常使用的优先放在前列**。